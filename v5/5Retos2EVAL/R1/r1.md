
**Proyecto: Infraestructura Hosting para Terraformadores de Venus**  

Terraformadores de Venus está ampliando su base de clientes, y su infraestructura en la nube debe ser capaz de satisfacer las necesidades de pequeñas startups y grandes corporaciones. Este proyecto será su carta de presentación para convertirse en un empleado oficial de Terraformadores.  

Recuerden, no se trata solo de configurar un servidor, sino de construir un sistema confiable, seguro y fácil de gestionar. La innovación es el núcleo de nuestra filosofía

Como nuevos empleados en prácticas, han sido seleccionados para llevar a cabo una tarea clave en el desarrollo de nuestra infraestructura de nube pública. Terraformadores de Venus ha adquirido una máquina virtual en AWS y necesita convertirla en un servidor de hosting que cumpla con los más altos estándares de seguridad y rendimiento.  

### **Requisitos del proyecto**  

1. **Servidor Apache como servidor web principal. Web de la empresa**  
   - Configure un servidor Apache en la máquina virtual de AWS para alojar la página web de la empresa accesible desde cualquier navegador.
   - La página debe ser visible a través de un **nombre de dominio registrado en un servicio de DNS dinámico**, como [Dynu.com](https://www.dynu.com) . Utilizar `ddclient` para configurar el servicio de actualización del dominio en el servidor. 
   - Diseñaran una sencilla página con información del servicio de hosting que ofrecemos. El dominio podría ser terraformadores____ .freedns.com, por ejemplo, cada uno eligirá el suyo. Accederemos por http://terraformadores____.freedns.com 

2. **Seguridad mediante HTTPS**  
   - El sitio web debe funcionar exclusivamente sobre **HTTPS**.  Si en el navegador nos solicitan http://terraformadores____.freedns.com deberá mostrarle al usuario https://terraformadores____.freedns.com
   - Utilice **Let's Encrypt y certbot** para obtener un certificado SSL gratuito y configure su renovación automática.

   ```
   NOTA:
   es muy importante que el reloj de tu máquina virtual esté correctamente sincronizado antes de crear un certificado con Let's Encrypt. Si la hora del sistema no está sincronizada, puede causar problemas durante el proceso de obtención del certificado
   ```

1. **Web de las empresas startups que tenemos como clientes de terraformadores**  
Realizar al menos dos WEBs para dos startups que nos han solicitado utilizar nuestro alojamiento. 
Estas Web tendran su sitio web alojado en /home/*nombre_startup*/public_html. Crearemos un usuario en el servidor por cada startup. Si la startup se llama vencedorestic el acceso será mediante https://terraformadores____.freedns.com/~vencedorestic. Para realizar las pruebas hasta que las startups suban sus webs haz una página sencila de pruebas.

1. **Extras de configuración**
   - Añadir un directorio con segurida digest en la web corporativa en el cual almacenaremos páginas con información sensible de la administración. El directorio debe llamarse "/admin". Accederiasmos con https://terraformadores____.freedns.com/admin/
   - Configura una página personalizada para el error 404.
   - investiga si tienes esta configuración respecto a los headers seguros activa y para que sirve. 

   ```sh
   <IfModule mod_headers.c>
         Header always set X-Frame-Options SAMEORIGIN
         Header always set X-Content-Type-Options nosniff
         Header always set Referrer-Policy "strict-origin-when-cross-origin"
      </IfModule>
   ```
   - Añade seguridad. Indica que utilidad tiene

   ```sh 
      ServerSignature Off
      ServerTokens Prod
   ```
   - (por desarrollar NO HACER aún)Configuración de PHP (php-fpm + opcache) y mpm.

1. **Crear un nuevo sitio web en nuestro servidor para un nuevo cliente**  
   La **Asociación de Turismo Ecológico "EcoTravel"** ha solicitado nuestra ayuda para alojar su web. 
   - El sitio con nombre similar a `https://ecoamazonia____.freedens.com`  debe estar en `/srv/www/ecoamazonia/`.

   Los diseñadores han realizado esta web [ecoamazonia.zip](./vh_ecoamazoniacompleto.zip)

1. **Otro Cliente deseoso de trabajar con nosotros**
   Estamos de enhorabuena, un nuevo cliente se ha puesto en contacto con nosotros para trabajar, eso sí, este cliente es un poco especial y quiere que su web corra sobre **nginx** ya que considerea que tiene mayor rendimiento y velocidad superior para una alta carga de conexiones.
   Nos pide una EC2 dedicada para él con **ip publica fija**, aunque el coste sea mayor(Por tener creada una IP elástica vamos a tener un coste aunque no ese asociada a una EC2). La web se llamará algo similar a www.ticpremiummaxpower___.freedns.com
   Además:
      - Implemente **HTTPS con Let's Encrypt** con renovación automática.
      - Configure redirección automática de HTTP a HTTPS.
      - DocumentRoot en `/var/www/ticpremium/`
      - Configure logs de acceso y error en `/var/log/nginx/`

1. **Ampliar nuestro oferta**
   En la empresa queremos ampliar nuestra oferta de servidores WEB. Por eso queremos que nuestr@s emplead@s aventajados investiguen como utilizar el servidor WEB caddy y que ventajas puede aportarnos utilizando el protocolo HHTP/3. Para ello debereis  poner en marcha una web sencilla para mostrar a nuestros potenciales clientes. 
   Decidir como lo queŕeis hacer, es decir, podéis reutilizar una EC2 o crear una independiente. 

1. **Servicio SSH y acceso mediante SFTP**
   Mantener el funcionamiento normal del servicio SSH para los usuarios de administración del servidor.
   Configurar el servicio SSH para que los usuarios creados para los nuevos clientes:

      - No puedan acceder mediante shell interactiva.
      - Conectare mediante clave 
      - Se conecten exclusivamente mediante SFTP.
      - Queden enjaulados (chroot) en su directorio asignado dentro de /srv.
      - Cada cliente dispondrá de una estructura de directorios propia ubicada en:
         `/srv/clientes/clienteX/`
      - Los clientes publicarán los archivos de su sitio web en el directorio:
         `/srv/clientes/clienteX/web`
       

1. **Servidor FTP seguro FTPS**

   Instalar y configurar un servidor FTP (por ejemplo, vsftpd) para la gestión de archivos de los clientes.
   El servidor FTP deberá cumplir las siguientes condiciones:

      - Utilizar exclusivamente conexiones cifradas mediante FTPS.
      - Configurarse en modo pasivo.
      - Piensa que protocolo interesa, explicito o implicito.
      - No permitir en ningún caso conexiones FTP sin cifrar.
      - Los usuarios clientes quedarán enjaulados en su directorio correspondiente dentro de `/srv`.Tendrán acceso únicamente a su carpeta asignada para la gestión de archivos web.

1. **Servidor web Apache**

   Reconfigurar Apache como servidor web.
   Cada cliente dispondrá de su propio espacio de publicación web ubicado en:
      `/srv/clientes/clienteX/web`



1. **Interfaz gráfica de gestión de archivos con File Browser**

   Utilizar File Browser como interfaz gráfica web para la gestión de archivos.
   Instalar y configurar File Browser como aplicación web de software libre.
   File Browser deberá:
      - Publicarse mediante HTTPS usando certificados SSL/TLS.
      - Permitir a cada cliente acceder únicamente a su propio espacio de subida.
      - Limitar el acceso de los usuarios a su directorio correspondiente dentro de:

      `/srv/clientes/clienteX/uploads`
      - Los archivos subidos mediante File Browser podrán ser posteriormente publicados en el directorio web del cliente mediante los mecanismos establecidos por el administrador del sistema.





 [evaluación proyecto](control_eval.md) 


  
